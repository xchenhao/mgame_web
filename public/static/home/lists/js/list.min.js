!function () {
    $("a.more_btn", ".quick_filter").live("click", function () {
        "更多" == $(this).html() ? ($(this).siblings("dd").children(".inner").css({height: "auto"}), $(this).css("background-position", "-48px -48px").html("收起")) : ($(this).siblings("dd").children(".inner").css({height: "28px"}), $(this).css("background-position", "16px -48px").html("更多"))
    }), $(".result_list_container ul li").mouseenter(function () {
        $(this).addClass("active")
    }).mouseleave(function () {
        $(this).removeClass("active")
    }), $(".more_options").live("click", function () {
        var i = $(this), t = i.parents(".quick_filter").find(".more_warp");
        t.toggleClass("extended"), t.hasClass("extended") ? (t.show(), i.addClass("extended").find("a").text("收起")) : (t.hide(), i.removeClass("extended").find("a").text("更多"))
    }), $(".catg_item").on({
        mouseenter: function () {
            $(this).css({background: "#f8f8f8"})
        }, mouseleave: function () {
            $(this).css({background: "#fff"})
        }, click: function () {
            $(this).siblings("dl").each(function () {
                $(this).find("dd").hide(), $(this).find("dt").css({"font-weight": "normal"}), $(this).find(".unfold").removeClass("unfold").addClass("fold")
            }), $(this).find("em").each(function () {
                $(this).hasClass("fold") ? ($(this).removeClass("fold").addClass("unfold"), $(this).parent().css({"font-weight": "bold"})) : $(this).hasClass("unfold") && ($(this).removeClass("unfold").addClass("fold"), $(this).parent().css({"font-weight": "normal"}))
            }), $(this).find("dd").toggle()
        }
    }), $(".bottom_wrap .mod_btn, .pp_item .mod_btn").live("click", function () {
        var i = $(this);
        if (!i.hasClass("disabled")) {
            var t = i.attr("data-goods-id"), n = 1, e = i.attr("data-sku-id"), s = i.attr("data-collocation-id") || "";
            if ("" == s)var a = ''; else var a = '';
            $("body").append(a)
        }
    }), $(".bottom_wrap").each(function (i, t) {
        var n = $(t);
        if (n.find(".mod_btn").length <= 0) {
            var e = '<div class="noStock"></div>';
            n.parent("li").find(".thumb_picture").append(e)
        }
    }), $("#sConfirmPrice").bind("click", function () {
        var i = window.location.href, t = parseInt($("#B_Price").val()), n = parseInt($("#E_Price").val());
        if ("" == $.trim($("#B_Price").val()) || "" == $.trim($("#E_Price").val()))return art.dialog({
            title: "系统提示",
            content: "请输入要筛选价格区间的最低价和最高价",
            icon: "warning"
        }), !1;
        if (t > n)return $("#B_Price").val(""), $("#E_Price").val(""), art.dialog({
            title: "系统提示",
            content: "最低价不能高于最高价，重新输入",
            icon: "warning"
        }), !1;
        var e = i.lastIndexOf("-");
        if (e > 0)var s = i.substr(0, e),
            a = s + "-" + t + "_" + n + ".html"; else var s = i.replace(".html", "").replace(".htm", ""),
            a = s + "----" + t + "_" + n + ".html";
        window.location.href = a
    }), $(function () {
        function i() {
            $.ajax({
                url: "http://my.okhqb.com/my/getEmailAndMobile.json",
                type: "GET",
                dataType: "jsonp",
                jsonp: "callback",
                context: document.body,
                success: function (i) {
                    i.data && (i.data.email && ($(".remind-email").val(i.data.email), $(".remind-email").siblings(".item-true").show()), i.data.mobile && ($(".remind-mobile").val(i.data.mobile), $(".remind-mobile").siblings(".item-true").show()))
                }
            })
        }

        function t() {
            art.dialog({id: "qqalt", title: "我的关注", content: $("#__remindDialogDOM").html()})
        }

        function n() {
            art.dialog({id: "__aralt", title: "到货通知", content: $("#__arrivalDialogDOM").html()})
        }

        function e(e, s) {
            var a = e.parent().siblings(".price_wrap").find("em").text().replace(/\s/g, "");
            $("#item_shop_price").html(a + " 元"), _skuId = e.siblings(".mod_btn").attr("data-sku-id")
        }

        function s(i, t) {
            var n;
            n = t ? '<div id="price-arrival-dialog-box"><div class="success_remind-dialog-icon"></div><div class="success_remind-dialog-right"><div class="success_remind-dialog-tit">设置成功！</div><div class="success_remind-dialog-txt">商品降价（到' + t + "元以下）时将第一时间提醒您。</div></div></div>" : '<div id="price-arrival-dialog-box"><div class="success_remind-dialog-icon"></div><div class="success_remind-dialog-right"><div class="success_remind-dialog-tit">设置成功！</div><div class="success_remind-dialog-txt">商品到货时将第一时间提醒您。</div></div></div>', art.dialog.get(i).close(), art.dialog({
                title: "我的关注",
                content: n,
                noFn: !0,
                time: 3,
                padding: "30px 50px"
            }), _view = '<span class="reminds_wrap followed_already">已关注<a class="reminds_center" href="http://my.okhqb.com/my/subscription.html">查看</a></span>', $(".reminds_wrap").html(_view), $(".reminds_wrap").addClass("followed_already")
        }

        var a, d, l, o = /^-?\d+$/,
            r = /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/,
            c = /^1[3|5|7|9|8]\d{9}$/, m = 0;
        $("input.remind-price").live("blur", function () {
            "" == $(this).val() ? ($(this).siblings(".remind-tips").show(), $(this).siblings(".remind-tips").find("span").html("请填写提醒价格！").fadeIn(200), a = !1) : o.test($(this).val()) ? $(this).val() >= m && ($(this).siblings(".remind-tips").show(), $(this).siblings(".remind-tips").find("span").html("请输入小于现价的提醒价！").fadeIn(200), a = !1) : ($(this).siblings(".remind-tips").show(), $(this).siblings(".remind-tips").find("span").html("价格只能为数字！").fadeIn(200), a = !1)
        }).live("keyup", function () {
            $(this).siblings(".remind-tips").slideUp(200), a = !0
        }), $("input.remind-email").live("blur", function () {
            "" == $(this).val() ? l = !0 : r.test($(this).val()) ? r.test($(this).val()) && $(this).siblings(".item-true").show() : ($(this).siblings(".remind-tips").show(), $(this).siblings(".remind-tips").find("span").html("email地址格式不正确！").fadeIn(200), l = !1)
        }).live("keyup", function () {
            $(this).siblings(".remind-tips").slideUp(200), l = !0
        }), $(".remind-mobile").live("focus", function () {
            $(this).siblings(".item-true").hide()
        }), $(".remind-email").live("focus", function () {
            $(this).siblings(".item-true").hide()
        }), $(".remind-mobile").live("blur", function () {
            "" == $(this).val() ? ($(this).siblings(".remind-tips").show(), $(this).siblings(".remind-tips").find("span").html("请填写您的手机号码！").fadeIn(200), d = !1) : c.test($(this).val()) ? c.test($(this).val()) && $(this).siblings(".item-true").show() : ($(this).siblings(".remind-tips").show(), $(this).siblings(".remind-tips").find("span").html("手机格式不正确！").fadeIn(200), d = !1)
        }).live("keyup", function () {
            $(this).siblings(".remind-tips").slideUp(200), d = !0
        }), $("span.price_notif").live("click", function () {
            var i = OKHQB_sign.isSignIn(), t = $(this),
                n = t.parent().siblings(".price_wrap").find("em").text().replace(/\s/g, "");
            m = Number(n), i ? (e(t, 1), $("#remind-dialog-btn").live("click", function () {
                if (!$("input.remind-price").val())return $("input.remind-price").siblings(".remind-tips").show(), $("input.remind-price").siblings(".remind-tips").find("span").html("请填写提醒价格！").fadeIn(200), a = !1, !1;
                if (0 == a || 0 == d || 0 == l)return !1;
                var i = $(".remind-price").val(), e = $(".remind-email").val(), o = $(".remind-mobile").val(),
                    r = t.siblings(".mod_btn").attr("data-sku-id");
            })) : OKHQB_sign.dialog({
                sign_in_callback: function () {
                    window.location.href = window.location.href
                }
            })
        }), $("span.arrival_notif").live("click", function () {
            var i = OKHQB_sign.isSignIn(), t = $(this),
                n = t.parent().siblings(".price_wrap").find("em").text().replace(/\s/g, "");
            m = Number(n), i ? (e(t, 2), $("#remind-dialog-btn").live("click", function () {
                if (0 == d || 0 == l)return !1;
                var i = $(".remind-email").val(), n = $(".remind-mobile").val(),
                    e = t.siblings(".mod_btn").attr("data-sku-id");
            })) : OKHQB_sign.dialog({
                sign_in_callback: function () {
                    window.location.href = window.location.href
                }
            })
        })
    })
}();